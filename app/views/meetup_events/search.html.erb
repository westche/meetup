<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse nav-search-from" id="bs-example-navbar-collapse-1">
      <%= simple_form_for :filter_options, :url => url_for(:action => 'search', :controller => 'meetup_events'), html: { class: "form-inline search-form" } do |f| %>
          <div class="form-group search-box">
            <%= f.input_field :zipcode, class: 'form-control', placeholder: 'Zipcode' %>
          </div>
          <div class="form-group search-box">
            <span class="radius-label">Radius : </span>
            <%= f.select :radius, @radius_list, selected: '50', class: 'radius-input' %>
            <span class="radius-label">miles</span>
          </div>
          <div class="form-group search-box">
            <%= f.input_field :keyword, class: 'form-control', placeholder: 'Filter' %>
          </div>
          <div class="form-group search-box">
            <button type="submit" class="search-button btn btn-success">
              <i class="glyphicon glyphicon-search"></i>
              <span>Search</span>
            </button>
          </div>
      <% end %>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<div class="content">
  <div class="event-container grid">
    <% if @fitness_events %>
        <% @fitness_events.each do |fitness_event| %>
            <div class="grid-item">
              <div class="event-list-container">
                <%= link_to "Register for event", {:controller => "meetup_events", :action => "detailed_event", :event => fitness_event['id'] }, class: "join-button btn btn-success hidden" %>
                <div class="row event-listing clearfix doc-padding">
                  <% if fitness_event['photo'] %>
                      <div class="">
                        <%= image_tag fitness_event['photo'], :class => "event_photo" %>
                      </div>
                  <% end %>
                  <p class="event-name"><%= fitness_event['name'] %></p>
                </div>
                <span class="glyphicon glyphicon-user"> <%= fitness_event['yes_rsvp_count'] %></span>
              </div>
            </div>
        <% end %>
    <% end %>

    <% if @outdoor_events %>
        <% @outdoor_events.each do |event| %>
            <div class="grid-item">
              <div class="event-list-container">
                <%= link_to "Register for event", {:controller => "meetup_events", :action => "detailed_event", :event => event['id'] }, class: "join-button btn btn-success hidden" %>
                <div class="row event-listing clearfix doc-padding">
                  <% if event['photo'] %>
                      <div class="">
                        <%= image_tag event['photo'], :class => "event_photo" %>
                      </div>
                  <% end %>
                  <p class="event-name"><%= event['name'] %></p>
                </div>
                <span class="glyphicon glyphicon-user"> <%= event['yes_rsvp_count'] %></span>
              </div>
            </div>
        <% end %>
    <% end %>

    <% if @sports_events %>
        <% @sports_events.each do |event| %>
            <div class="grid-item">
              <div class="event-list-container">
                <%= link_to "Register for event", {:controller => "meetup_events", :action => "detailed_event", :event => event['id'] }, class: "join-button btn btn-success hidden" %>
                <div class="row event-listing clearfix doc-padding">
                  <% if event['photo'] %>
                      <div class="">
                        <%= image_tag event['photo'], :class => "event_photo" %>
                      </div>
                  <% end %>
                  <p class="event-name"><%= event['name'] %></p>
                </div>
                <span class="glyphicon glyphicon-user"> <%= event['yes_rsvp_count'] %></span>
              </div>
            </div>
        <% end %>
    <% end %>
  </div>

  <% if !@fitness_events && !@outdoor_events && !@sports_events %>
      <p class="no-result">No Search Result</p>
  <% end %>
</div>

<script src="https://unpkg.com/masonry-layout@4.1/dist/masonry.pkgd.min.js"></script>
<script>
    var grid = document.querySelector('.grid');
    var msnry = new Masonry( grid, {
//        // options...
//        columnWidth: 20,
//        fitWidth: true,
        itemSelector: '.grid-item',
        gutter: 10
    });

    $("div.grid-item").click(function() {
        window.location=$(this).find("a").attr("href"); return false;
    });

</script>
